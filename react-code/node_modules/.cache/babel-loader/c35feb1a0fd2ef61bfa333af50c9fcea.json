{"ast":null,"code":"import _toConsumableArray from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import Card from'../Navbar/Components/Automate/Card/Card';import axios from'axios';axios.defaults.headers.post['Content-Type']='application/x-www-form-urlencoded';var CardsList=/*#__PURE__*/function(_Component){_inherits(CardsList,_Component);function CardsList(props){var _this;_classCallCheck(this,CardsList);_this=_possibleConstructorReturn(this,_getPrototypeOf(CardsList).call(this,props));_this.moveRestUp=_this.moveRestUp.bind(_assertThisInitialized(_this));_this.removeCard=_this.removeCard.bind(_assertThisInitialized(_this));_this.resetTravel=_this.resetTravel.bind(_assertThisInitialized(_this));_this.beginRemoveCard=_this.beginRemoveCard.bind(_assertThisInitialized(_this));_this.state={cards:[]};return _this;}_createClass(CardsList,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;axios.get('https://smart-flask-api.herokuapp.com/ml/recommend').then(function(res){console.log(res.data);var result=res.data;_this2.setState({cards:result});});}},{key:\"removeCard\",value:function removeCard(card){var index=this.state.cards.indexOf(card);if(index>-1){return[].concat(_toConsumableArray(this.state.cards.slice(0,index)),_toConsumableArray(this.state.cards.slice(index+1)));}}},{key:\"beginRemoveCard\",value:function beginRemoveCard(card){var newCards=_toConsumableArray(this.state.cards);newCards[newCards.indexOf(card)].removing=true;this.setState({cards:newCards});}},{key:\"moveRestUp\",value:function moveRestUp(card,delta){var initialCardIndex=this.state.cards.indexOf(card);var newCards=_toConsumableArray(this.state.cards);newCards.forEach(function(currCard,i){if(i>initialCardIndex){currCard.travelTo=delta;}});this.setState({cards:newCards});}},{key:\"resetTravel\",value:function resetTravel(){var newCards=this.removeCard(this.state.cards.find(function(card){return card.removing;}));if(newCards){newCards.forEach(function(card){return delete card.travelTo;});this.setState({cards:newCards});}}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(\"div\",{className:\"cards-list\"},this.state.cards.map(function(card,i){return React.createElement(Card,{key:card.key,card:card,moveRestUp:_this3.moveRestUp,resetTravel:i===_this3.state.cards.length-1?_this3.resetTravel:null,beginRemoveCard:_this3.beginRemoveCard});}));}}]);return CardsList;}(Component);export{CardsList as default};","map":{"version":3,"sources":["/home/ayushnagar123/Desktop/github/Grocery-list-Frontend/src/components/CardList/CardList.js"],"names":["React","Component","Card","axios","defaults","headers","post","CardsList","props","moveRestUp","bind","removeCard","resetTravel","beginRemoveCard","state","cards","get","then","res","console","log","data","result","setState","card","index","indexOf","slice","newCards","removing","delta","initialCardIndex","forEach","currCard","i","travelTo","find","map","key","length"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Card from '../Navbar/Components/Automate/Card/Card'\nimport axios from 'axios'\naxios.defaults.headers.post['Content-Type'] ='application/x-www-form-urlencoded';\nexport default class CardsList extends Component {\n\n    constructor(props){\n        super(props);\n        this.moveRestUp = this.moveRestUp.bind(this);\n        this.removeCard = this.removeCard.bind(this);\n        this.resetTravel = this.resetTravel.bind(this);\n        this.beginRemoveCard = this.beginRemoveCard.bind(this);\n        this.state = {\n            cards: []\n        };\n    }\n    componentWillMount(){\n        axios.get('https://smart-flask-api.herokuapp.com/ml/recommend')\n        .then(res=>{\n          console.log(res.data)\n          const result = res.data;\n          this.setState({cards:result})\n        })\n    }\n    \n\n    removeCard(card) {\n        let index = this.state.cards.indexOf(card);\n\n        if (index > -1) {\n            return [...this.state.cards.slice(0, index), ...this.state.cards.slice(index+1)];\n        }\n\n    }\n\n    beginRemoveCard(card) {\n        let newCards = [...this.state.cards];\n        newCards[newCards.indexOf(card)].removing = true;\n        this.setState({cards: newCards});\n    }\n\n    moveRestUp(card, delta){\n        let initialCardIndex = this.state.cards.indexOf(card);\n        let newCards = [...this.state.cards];\n        newCards.forEach((currCard, i)=>{\n            if (i>initialCardIndex){\n                currCard.travelTo = delta\n            }\n        });\n\n        this.setState({cards: newCards});\n    }\n\n    resetTravel(){\n        let newCards = this.removeCard(this.state.cards.find(card=>card.removing));\n\n        if (newCards) {\n            newCards.forEach(card=>delete card.travelTo);\n            this.setState({cards: newCards});\n        }\n    }\n\n    render() {\n        return <div className=\"cards-list\">\n            {this.state.cards.map((card, i)=>{\n                return <Card\n                    key={card.key}\n                    card={card}\n                    moveRestUp={this.moveRestUp}\n                    resetTravel={i === this.state.cards.length-1 ? this.resetTravel : null}\n                    beginRemoveCard={this.beginRemoveCard}/>\n            })}\n        </div>\n    }\n}"]},"metadata":{},"sourceType":"module"}